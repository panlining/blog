<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  文件搜索命令 - 彼得潘
  
  </title>
 <meta name="description" content="">
 <link href="atom.xml" rel="alternate" title="彼得潘" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">彼得潘</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; 彼得潘</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>中文文档</label></li>

          
            <li><a title="MWeb - 专业的 Markdown 写作、记笔记、静态博客生成软件" href="14269480090478.html">MWeb - 专业的 Markdown 写作、记笔记、静态博客生成软件</a></li>
          
            <li><a title="Markdown 语法和 MWeb 写作使用说明" href="14269478334488.html">Markdown 语法和 MWeb 写作使用说明</a></li>
          

      
        <li class="divider"></li>
        <li><label>English Help</label></li>

          
            <li><a title="MWeb - Pro Markdown writing, note taking and static blog generator App" href="14269481407962.html">MWeb - Pro Markdown writing, note taking and static blog generator App</a></li>
          
            <li><a title="Markdown syntax guide and writing on MWeb" href="14269481403147.html">Markdown syntax guide and writing on MWeb</a></li>
          

      
        <li class="divider"></li>
        <li><label>Linux</label></li>

          
            <li><a title="文件搜索命令" href="14617697782186.html">文件搜索命令</a></li>
          
            <li><a title="文件处理命令" href="14617693694457.html">文件处理命令</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>中文文档</span></li>
                        
                          <li><a title="MWeb - 专业的 Markdown 写作、记笔记、静态博客生成软件" href="14269480090478.html">MWeb - 专业的 Markdown 写作、记笔记、静态博客生成软件</a></li>
                        
                          <li><a title="Markdown 语法和 MWeb 写作使用说明" href="14269478334488.html">Markdown 语法和 MWeb 写作使用说明</a></li>
                        

                    
                      <li class="side-title"><span>English Help</span></li>
                        
                          <li><a title="MWeb - Pro Markdown writing, note taking and static blog generator App" href="14269481407962.html">MWeb - Pro Markdown writing, note taking and static blog generator App</a></li>
                        
                          <li><a title="Markdown syntax guide and writing on MWeb" href="14269481403147.html">Markdown syntax guide and writing on MWeb</a></li>
                        

                    
                      <li class="side-title"><span>Linux</span></li>
                        
                          <li><a title="文件搜索命令" href="14617697782186.html">文件搜索命令</a></li>
                        
                          <li><a title="文件处理命令" href="14617693694457.html">文件处理命令</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>文件搜索命令</h1>

<h3 id="toc_0">locate搜索</h3>

<p>该命令用来快速匹配文件名包含123的文件<br/>
用来搜索/var/lib/mlocate数据库，这个数据库存储所有文件的信息<br/>
但是这个数据库不是实时更新的（每天一更新）<br/>
所以如果想要实时更新，可以执行updatedb命令来更新数据库，然后用locate搜索<br/>
在这里需要指出的是，locate是按照/etc/updatedb.conf配置文件来搜索的，这个文件里记录了一些搜索的规则</p>

<pre><code>// 开启搜索限制，改为no则为不开启搜索限制
PRUNE_BIND_MOUNTS = &quot;yes&quot;

// 搜索时，不搜索的文件系统
PRUNEFS =

// 搜索时，不搜索的文件类型
PRUNENAMES = 

// 搜索时，不搜索的目录
PRUNEPATHS = 

</code></pre>

<h3 id="toc_1">命令搜索命令whereis和which</h3>

<p>whereis 用来搜索命令<br/>
如：whereis ls</p>

<p>与之类似的命令还有：whoami(用来查看当前账号的用户名),whatis(用来查看命令的作用)</p>

<p>which 除了搜索命令的位置，还会搜索命令别名的位置</p>

<h3 id="toc_2">PATH环境变量</h3>

<p>在linux中，执行一个命令，只有一种方法，就是用命令的绝对路径，如：/bin/ls<br/>
但是这样很不方便，系统就为我们开发出来一个环境变量</p>

<pre><code>// 终端中输入 echo $PATH会出现以下目录，中间用冒号分割，这些目录是用来在我们执行一个命令时（不带绝对路径），系统会挨着这些目录查找这个命令，如果在某一个目录中找到了命令，那就会执行之，如果都没找到，则会报 command not found（命令未找到）
MacBook:~ lining$ echo $PATH
/usr/local/bin:/usr/local/sbib:/usr/local/opt/php56/sbin:/usr/local/opt/php56/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
</code></pre>

<p>whereis和which搜索以来PATH环境变量提供的目录</p>

<h3 id="toc_3">find命令</h3>

<p>find是一个非常强大的搜索命令<br/>
命令格式：find [搜索范围] [搜索条件]<br/>
如：find / -name install.log（在根目录下按文件名搜索install.log文件）</p>

<p>find命令也可以实现模糊匹配查询，模糊匹配查询时需要使用通配符匹配，通配符是完全匹配。<br/>
如：<br/>
MacBook:~ lining$ sudo find / -name <q>nginx.conf</q><br/>
/usr/local/etc/nginx/nginx.conf</p>

<p>MacBook:~ lining$ sudo find / -name <q>nginx.conf*</q><br/>
/usr/local/etc/nginx/nginx.conf<br/>
/usr/local/etc/nginx/nginx.conf.default</p>

<p>find / -name <q>ab[cd]</q><br/>
搜索文件名为abc或者abd的文件</p>

<p>find / -name <q>*[cd]</q><br/>
搜索文件名以c或者d结尾的文件</p>

<pre><code>linux中的通配符
*       匹配任意内容
?       匹配任意一个字符
[]      匹配任意一个中括号内的字符


</code></pre>

<h4 id="toc_4">- 不区分大小写搜索</h4>

<p>find / -iname filename</p>

<h4 id="toc_5">- 按所有者搜索</h4>

<p>find / -user root<br/>
find / -nouser<br/>
搜索没有所有者的文件</p>

<h4 id="toc_6">- 按修改时间搜</h4>

<p>find /var/log/ -mtime +10<br/>
搜索10天前修改的文件</p>

<p>-10 10天内修改的文件<br/>
10      10天当天修改的文件<br/>
+10 10天前修改的文件</p>

<p>atime       文件访问时间<br/>
ctime       修改文件属性<br/>
mtime       修改文件内容</p>

<h4 id="toc_7">- 按文件大小搜索</h4>

<p>find /etc -size +20M<br/>
find /etc -size 25k<br/>
find /etc -size -30M<br/>
find /etc -size 25（这样写是说搜索25个512k字节）<br/>
（注意兆字节要用大写M，千字节要用小写k）</p>

<h4 id="toc_8">- 安装i节点搜索</h4>

<p>find / -inum 23947</p>

<h4 id="toc_9">- 多条件查询</h4>

<p>find /etc -size +20k -a -size -50k<br/>
（查找大于20k且小于50k的文件）</p>

<p>如果想查看搜索结果的详细信息<br/>
find /etc -size +20k -a -size -50k -exec ls -l {} \;<br/>
-exec/-ok 命令 {} \;对搜索结果执行操作</p>

<h3 id="toc_10">grep命令</h3>

<p>grep [选项] 字符串 文件名<br/>
在文件中匹配符合条件的字符串<br/>
选项：<br/>
-i      忽略大小写<br/>
-v      排除指定字符串</p>

<h3 id="toc_11">find和grep的区别</h3>

<p>find命令：在系统中搜索符合条件的文件名，如果需要匹配，使用通配符匹配，通配符是完全匹配。<br/>
grep命令：在文件当中搜索符合条件的字符串，如果需要匹配，使用正则表达式匹配，正则表达式是包含匹配</p>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="14617693694457.html" 
	        title="Next Post: 文件处理命令">文件处理命令 &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '14617697782186.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    


  </body>
</html>
